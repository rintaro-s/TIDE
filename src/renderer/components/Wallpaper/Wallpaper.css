/* Base body styles */
body {
  background: var(--bg-primary, #1e1e1e);
  margin: 0;
  padding: 0;
}

html {
  background: transparent;
}

#root {
  background: transparent;
}

#app-wallpaper-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0;
  transition: opacity 0.3s ease, filter 0.3s ease;
}

/* When wallpaper is active, make ALL containers transparent and add glass effects */
body.has-wallpaper .app {
  background: transparent !important;
}

body.has-wallpaper .main-workspace {
  background: transparent !important;
}

body.has-wallpaper #root {
  background: transparent !important;
}

body.has-wallpaper html {
  background: transparent !important;
}

/* Make all major UI elements semi-transparent with glass effects */
body.has-wallpaper .title-bar {
  background: rgba(var(--bg-secondary-rgb, 37, 37, 38), 0.85) !important;
  backdrop-filter: blur(15px) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(15px) saturate(1.2) !important;
}

body.has-wallpaper .sidebar-container,
body.has-wallpaper .sidebar {
  background: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.85) !important;
  backdrop-filter: blur(15px) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(15px) saturate(1.2) !important;
}

body.has-wallpaper .sidebar-iconbar {
  background: rgba(var(--bg-secondary-rgb, 37, 37, 38), 0.85) !important;
  backdrop-filter: blur(15px) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(15px) saturate(1.2) !important;
}

body.has-wallpaper .editor-area {
  background: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.80) !important;
  backdrop-filter: blur(20px) saturate(1.1) !important;
  -webkit-backdrop-filter: blur(20px) saturate(1.1) !important;
}

body.has-wallpaper .editor-tabs {
  background: rgba(var(--bg-secondary-rgb, 37, 37, 38), 0.85) !important;
  backdrop-filter: blur(10px) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(10px) saturate(1.2) !important;
}

body.has-wallpaper .bottom-panel,
body.has-wallpaper .bottom-panel-tabs {
  background: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.85) !important;
  backdrop-filter: blur(15px) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(15px) saturate(1.2) !important;
}

body.has-wallpaper .status-bar {
  background: rgba(0, 122, 204, 0.85) !important;
  backdrop-filter: blur(10px) saturate(1.2) !important;
  -webkit-backdrop-filter: blur(10px) saturate(1.2) !important;
}

body.has-wallpaper .file-explorer,
body.has-wallpaper .search-panel,
body.has-wallpaper .build-manager,
body.has-wallpaper .git-panel,
body.has-wallpaper .settings-panel,
body.has-wallpaper .pin-panel,
body.has-wallpaper .lan-panel,
body.has-wallpaper .project-manager {
  background: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.80) !important;
  backdrop-filter: blur(20px) saturate(1.1) !important;
  -webkit-backdrop-filter: blur(20px) saturate(1.1) !important;
}

body.has-wallpaper .startup-screen {
  background: rgba(20, 25, 35, 0.75) !important;
  backdrop-filter: blur(25px) saturate(1.3) !important;
  -webkit-backdrop-filter: blur(25px) saturate(1.3) !important;
}

/* Monaco Editor glass effect */
body.has-wallpaper .monaco-editor .margin,
body.has-wallpaper .monaco-editor .monaco-editor-background {
  background-color: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.8) !important;
}

/* Project Manager glass effect */
body.has-wallpaper .project-manager {
  background: rgba(20, 25, 35, 0.80) !important;
  backdrop-filter: blur(20px) saturate(1.1) !important;
  -webkit-backdrop-filter: blur(20px) saturate(1.1) !important;
}

/* Additional overrides for components that set solid backgrounds with !important
   Ensure these parts become translucent when wallpaper is active so wallpaper shows through. */
body.has-wallpaper .advanced-editor-wrapper,
body.has-wallpaper .advanced-editor-container .monaco-editor,
body.has-wallpaper .advanced-editor-container .monaco-editor .monaco-editor-background,
body.has-wallpaper .advanced-editor-container .monaco-scrollable-element,
body.has-wallpaper .advanced-editor-container .monaco-scrollable-element > .scrollbar > .slider,
body.has-wallpaper .editor-header,
body.has-wallpaper .editor-area,
body.has-wallpaper .editor-container,
body.has-wallpaper .workspace-content,
body.has-wallpaper .main-area,
body.has-wallpaper .file-explorer,
body.has-wallpaper .project-manager,
body.has-wallpaper .sidebar,
body.has-wallpaper .sidebar-container,
body.has-wallpaper .title-bar,
body.has-wallpaper .bottom-panel,
body.has-wallpaper .bottom-panel-tabs {
  background: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.80) !important;
  backdrop-filter: blur(14px) saturate(1.1) !important;
  -webkit-backdrop-filter: blur(14px) saturate(1.1) !important;
}

/* Monaco editor specific: ensure editor background becomes translucent when wallpaper active */
body.has-wallpaper .advanced-editor-container .monaco-editor .monaco-editor-background {
  background-color: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.75) !important;
}

/* Loading overlays should be translucent so wallpaper remains visible underneath */
body.has-wallpaper .advanced-editor-wrapper.loading::before,
body.has-wallpaper .advanced-editor-wrapper.loading::after,
body.has-wallpaper .loading-overlay,
body.has-wallpaper .modal-backdrop {
  background: rgba(0,0,0,0.35) !important;
}

/* Gentle reveal: conservative, reversible UI translucency when wallpaper active
   - Small, theme-adaptive reduction of panel opacity so wallpaper is visible
   - Kept conservative (0.35) to preserve legibility and avoid layout shifts
   - This is a minimal, reversible change; we can further scope per-theme later
*/
:root {
  /* UI alpha used when wallpaper is active */
  --wallpaper-ui-alpha: 0.35;
}

body.has-wallpaper .app,
body.has-wallpaper .main-workspace,
body.has-wallpaper .main-area,
body.has-wallpaper .workspace-content,
body.has-wallpaper .editor-area,
body.has-wallpaper .project-manager,
body.has-wallpaper .settings-panel,
body.has-wallpaper .sidebar,
body.has-wallpaper .title-bar {
  background: rgba(var(--bg-primary-rgb, 30, 30, 30), var(--wallpaper-ui-alpha)) !important;
  backdrop-filter: blur(12px) saturate(1.05) !important;
  -webkit-backdrop-filter: blur(12px) saturate(1.05) !important;
}

/* Monaco editor background lighter reveal */
body.has-wallpaper .monaco-editor .monaco-editor-background,
body.has-wallpaper .advanced-editor-container .monaco-editor .monaco-editor-background,
body.has-wallpaper .advanced-editor-container .monaco-scrollable-element {
  background-color: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.25) !important;
}
/* debug block removed: restore original safe styles */
